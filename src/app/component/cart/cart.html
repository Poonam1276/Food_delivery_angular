<div class="container mt-4">
  <h2 class="mb-4">Your Cart</h2>

  <div *ngFor="let cart of cartItems" class="card mb-3">
    <div class="card-header d-flex justify-content-between align-items-center">
      <div>
        <strong>{{ cart.restaurantName }}</strong>
        <span class="text-muted"> - ₹{{ cart.totalAmount }}</span>
      </div>
      <button class="btn btn-sm btn-outline-primary" (click)="toggleDropdown(cart)">
        {{ cart.expanded ? 'Hide Items' : 'Show Items' }}
      </button>
    </div>

    <div *ngIf="cart.expanded" class="card-body">
      <div *ngFor="let item of cart.items" class="row align-items-center mb-3">
        <div class="col-md-2">
          <img [src]="item.foodImage" alt="{{ item.name }}" class="img-fluid rounded" />
        </div>
        <div class="col-md-4">
          <h5>{{ item.name }}</h5>
          <p class="text-muted">{{ item.description }}</p>
          <p><strong>Category:</strong> {{ item.category }}</p>
        </div>
        <div class="col-md-2">
          <p><strong>Price:</strong> ₹{{ item.price }}</p>
        </div>
        <div class="col-md-2">
          <div class="input-group">
            <button class="btn btn-outline-secondary" (click)="decreaseQuantity(item)">-</button>
            <input type="text" class="form-control text-center" [value]="item.quantity" readonly />
            <button class="btn btn-outline-secondary" (click)="increaseQuantity(item)">+</button>
          </div>
        </div>
        <div class="col-md-2 text-end">
          <button class="btn btn-danger btn-sm" (click)="removeItem(cart, item)">Remove</button>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-4">
    <h4>Total: ₹{{ total }}</h4>
    <div class="input-group mb-3" style="max-width: 300px;">
      
      <button class="btn btn-success" (click)="applyCoupon()">Apply Coupon</button>
    </div>
    <button class="btn btn-primary" (click)="checkout()">Checkout</button>
  </div>
</div>
